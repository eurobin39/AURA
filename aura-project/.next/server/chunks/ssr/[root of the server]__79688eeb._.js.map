{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/eurobae/AURA/Aura/aura-project/lib/db.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\nconst db = new PrismaClient();\n\nexport default db;"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,KAAK,IAAI,6HAAA,CAAA,eAAY;uCAEZ","debugId":null}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/eurobae/AURA/Aura/aura-project/lib/constants.ts"],"sourcesContent":["export const PASSWORD_REGEX = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*?[#?!@$&^&*-]).+$/);"],"names":[],"mappings":";;;AAAO,MAAM,iBAAiB,IAAI,OAAO","debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/eurobae/AURA/Aura/aura-project/lib/session.ts"],"sourcesContent":["import { getIronSession } from \"iron-session\";\nimport { cookies } from \"next/headers\";\n\ninterface SessionContent {\n    id?: number;\n}\n\nexport default async function getSession() {\n    const cookieStore = await cookies();\n    return getIronSession<SessionContent>(cookieStore, {\n        cookieName: \"delicious-karrot\",\n        password: process.env.COOKIE_PASSWORD!,\n    });\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAMe,eAAe;IAC1B,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,OAAO,CAAA,GAAA,gJAAA,CAAA,iBAAc,AAAD,EAAkB,aAAa;QAC/C,YAAY;QACZ,UAAU,QAAQ,GAAG,CAAC,eAAe;IACzC;AACJ","debugId":null}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 66, "column": 0}, "map": {"version":3,"sources":["file:///Users/eurobae/AURA/Aura/aura-project/app/register/actions.tsx"],"sourcesContent":["\"use server\";\n\nimport { z } from \"zod\";\nimport db from \"@/lib/db\"\nimport { PASSWORD_REGEX } from \"@/lib/constants\";\nimport bcrypt from \"bcrypt\";\nimport { redirect } from \"next/navigation\";\nimport getSession from \"@/lib/session\"\n\nconst checkPassWord = ({ password, confirmPassword }: { password: string, confirmPassword: string }) =>\n    password === confirmPassword;\n\nconst formSchema = z.object({\n    username: z.string().min(3).max(10).trim().toLowerCase(),\n    email: z.string().email().toLowerCase(),\n    password: z.string().min(10).regex(PASSWORD_REGEX, \"password must have lowercase, UPPERCASE, number and special Character!\"),\n    confirmPassword: z.string().min(10),\n}).superRefine(async ({ username }, ctx) => {\n    const user = await db.user.findUnique({\n        where: {\n            username,\n        },\n        select: {\n            id: true\n        }\n    });\n    if (user) {\n        ctx.addIssue({\n            code: 'custom',\n            message: \"this username is already taken\",\n            path: [username],\n            fatal: true,\n        });\n        return z.NEVER;\n    }\n}\n).superRefine(async ({ email }, ctx) => {\n    const user = await db.user.findUnique({\n        where: {\n            email,\n        },\n        select: {\n            id: true\n        }\n    });\n    if (user) {\n        ctx.addIssue({\n            code: 'custom',\n            message: \"this email is already taken\",\n            path: [email],\n            fatal: true,\n        });\n        return z.NEVER;\n    }\n}\n).refine(checkPassWord, {\n    message: \"confirm password is different!\",\n    path: [\"confirmPassword\"],\n});\n\nexport async function createAccount(\n    prevState: { \n      fieldErrors?: { \n        username?: string[], \n        email?: string[], \n        password?: string[], \n        confirmPassword?: string[] \n      } \n    } | null, \n    formData: FormData\n  ) {\n    const data = {\n        username: formData.get(\"username\"),\n        email: formData.get(\"email\"),\n        password: formData.get(\"password\"),\n        confirmPassword: formData.get(\"confirmPassword\"),\n    };\n\n    const result = await formSchema.safeParseAsync(data);\n    if (!result.success) {\n        return result.error.flatten();\n    } else {\n        const hashedPassword = await bcrypt.hash(result.data.password, 12);\n\n        const user = await db.user.create({\n            data: {\n                username: result.data.username,\n                email: result.data.email,\n                password: hashedPassword,\n                role: \"Pending\", // Automatically assign \"Pending\" role\n            },\n            select: {\n                id: true,\n            },\n        });\n        const session = await getSession();\n\n        session.id = user.id\n        await session.save();\n        redirect(\"/pending-approval\"); // Redirect to a pending approval page\n    }\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;AAEA;AAAA;AACA;;;;;;;;;;AAEA,MAAM,gBAAgB,CAAC,EAAE,QAAQ,EAAE,eAAe,EAAiD,GAC/F,aAAa;AAEjB,MAAM,aAAa,oIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IACxB,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,IAAI,GAAG,WAAW;IACtD,OAAO,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,KAAK,GAAG,WAAW;IACrC,UAAU,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI,KAAK,CAAC,gHAAA,CAAA,iBAAc,EAAE;IACnD,iBAAiB,oIAAA,CAAA,IAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AACpC,GAAG,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE;IAChC,MAAM,OAAO,MAAM,yGAAA,CAAA,UAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAClC,OAAO;YACH;QACJ;QACA,QAAQ;YACJ,IAAI;QACR;IACJ;IACA,IAAI,MAAM;QACN,IAAI,QAAQ,CAAC;YACT,MAAM;YACN,SAAS;YACT,MAAM;gBAAC;aAAS;YAChB,OAAO;QACX;QACA,OAAO,oIAAA,CAAA,IAAC,CAAC,KAAK;IAClB;AACJ,GACE,WAAW,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE;IAC5B,MAAM,OAAO,MAAM,yGAAA,CAAA,UAAE,CAAC,IAAI,CAAC,UAAU,CAAC;QAClC,OAAO;YACH;QACJ;QACA,QAAQ;YACJ,IAAI;QACR;IACJ;IACA,IAAI,MAAM;QACN,IAAI,QAAQ,CAAC;YACT,MAAM;YACN,SAAS;YACT,MAAM;gBAAC;aAAM;YACb,OAAO;QACX;QACA,OAAO,oIAAA,CAAA,IAAC,CAAC,KAAK;IAClB;AACJ,GACE,MAAM,CAAC,eAAe;IACpB,SAAS;IACT,MAAM;QAAC;KAAkB;AAC7B;AAEO,eAAe,uCAAW,GAAX,cAClB,SAOQ,EACR,QAAkB;IAElB,MAAM,OAAO;QACT,UAAU,SAAS,GAAG,CAAC;QACvB,OAAO,SAAS,GAAG,CAAC;QACpB,UAAU,SAAS,GAAG,CAAC;QACvB,iBAAiB,SAAS,GAAG,CAAC;IAClC;IAEA,MAAM,SAAS,MAAM,WAAW,cAAc,CAAC;IAC/C,IAAI,CAAC,OAAO,OAAO,EAAE;QACjB,OAAO,OAAO,KAAK,CAAC,OAAO;IAC/B,OAAO;QACH,MAAM,iBAAiB,MAAM,OAAO,IAAI,CAAC,OAAO,IAAI,CAAC,QAAQ,EAAE;QAE/D,MAAM,OAAO,MAAM,yGAAA,CAAA,UAAE,CAAC,IAAI,CAAC,MAAM,CAAC;YAC9B,MAAM;gBACF,UAAU,OAAO,IAAI,CAAC,QAAQ;gBAC9B,OAAO,OAAO,IAAI,CAAC,KAAK;gBACxB,UAAU;gBACV,MAAM;YACV;YACA,QAAQ;gBACJ,IAAI;YACR;QACJ;QACA,MAAM,UAAU,MAAM,CAAA,GAAA,8GAAA,CAAA,UAAU,AAAD;QAE/B,QAAQ,EAAE,GAAG,KAAK,EAAE;QACpB,MAAM,QAAQ,IAAI;QAClB,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE,sBAAsB,sCAAsC;IACzE;AACJ;;;IAzCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 234, "column": 0}, "map": {"version":3,"sources":["file:///Users/eurobae/AURA/Aura/aura-project/app/register/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/register/page.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/register/page.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAyR,GACtT,uDACA","debugId":null}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 248, "column": 0}, "map": {"version":3,"sources":["file:///Users/eurobae/AURA/Aura/aura-project/app/register/page.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/register/page.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/register/page.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAqQ,GAClS,mCACA","debugId":null}},
    {"offset": {"line": 256, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}